{
  "name": "sql-runner-extension",
  "displayName": "SQL Runner",
  "description": "Execute SQL queries with Cmd+Enter and view results in an interactive table",
  "version": "0.0.1",
  "engines": {
    "vscode": "^1.85.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [
    "onLanguage:sql"
  ],
  "main": "./out/extension.js",
  "contributes": {
    "commands": [
      {
        "command": "sqlRunner.executeQuery",
        "title": "Execute SQL Query"
      },
      {
        "command": "sqlRunner.executeStatementAtLine",
        "title": "Execute SQL Statement at Position"
      },
      {
        "command": "sqlRunner.describeTable",
        "title": "Describe Table"
      },
      {
        "command": "sqlRunner.describeTableAtCursor",
        "title": "SQL Runner: Describe Table at Cursor"
      },
      {
        "command": "sqlRunner.exportResult",
        "title": "Export Query Result to CSV"
      },
      {
        "command": "sqlRunner.selectStatement",
        "title": "Select SQL Statement"
      },
      {
        "command": "sqlRunner.copyStatement",
        "title": "Copy SQL Statement to Clipboard"
      },
      {
        "command": "sqlRunner.refreshMetadata",
        "title": "SQL Runner: Refresh Schema Metadata"
      },
      {
        "command": "sqlRunner.showMetadataStats",
        "title": "SQL Runner: Show Metadata Statistics"
      },
      {
        "command": "sqlRunner.editSchemasConfig",
        "title": "SQL Runner: Edit Schemas to Scan"
      },
      {
        "command": "sqlRunner.editTablesConfig",
        "title": "SQL Runner: Edit Tables to Include"
      }
    ],
    "keybindings": [
      {
        "command": "sqlRunner.executeQuery",
        "key": "cmd+enter",
        "mac": "cmd+enter",
        "win": "ctrl+enter",
        "linux": "ctrl+enter",
        "when": "editorTextFocus && editorLangId == sql"
      },
      {
        "command": "sqlRunner.describeTableAtCursor",
        "key": "cmd+d",
        "mac": "cmd+d",
        "win": "ctrl+d",
        "linux": "ctrl+d",
        "when": "editorTextFocus && editorLangId == sql"
      }
    ],
    "configuration": {
      "title": "SQL Runner",
      "properties": {
        "sqlRunner.odbcDsn": {
          "type": "string",
          "default": "Hermes",
          "description": "ODBC DSN name for database connections"
        },
        "sqlRunner.pythonPath": {
          "type": "string",
          "default": "python3",
          "description": "Path to Python executable (must have pyodbc and pandas installed)"
        },
        "sqlRunner.useMockDatabase": {
          "type": "boolean",
          "default": false,
          "description": "Use in-memory SQLite mock database instead of ODBC (useful for testing without ODBC setup)"
        },
        "sqlRunner.exportDirectory": {
          "type": "string",
          "default": "",
          "description": "Directory to export query results to CSV. If empty, exports to the same directory as the SQL file."
        },
        "sqlRunner.maxDisplayRows": {
          "type": "number",
          "default": 1000,
          "description": "Maximum number of rows to display in the result table. Set to 0 for unlimited rows."
        },
        "sqlRunner.intellisense.enabled": {
          "type": "boolean",
          "default": true,
          "description": "Enable SQL Intellisense (autocomplete for schemas, tables, and columns)"
        },
        "sqlRunner.intellisense.defaultSchema": {
          "type": "string",
          "default": "ACCESS_VIEWS",
          "description": "Default schema to use for unqualified table references"
        },
        "sqlRunner.intellisense.autoExpandFromQueries": {
          "type": "boolean",
          "default": true,
          "description": "Automatically discover tables when they are referenced in executed queries"
        },
        "sqlRunner.intellisense.autoRefreshIntervalMs": {
          "type": "number",
          "default": 3600000,
          "description": "How often to refresh schema metadata in milliseconds (default: 1 hour)"
        },
        "sqlRunner.intellisense.requestThrottleMs": {
          "type": "number",
          "default": 500,
          "description": "Minimum time between metadata refresh requests in milliseconds"
        },
        "sqlRunner.intellisense.maxTablesPerSchema": {
          "type": "number",
          "default": 1000,
          "description": "Maximum number of tables to load per schema"
        }
      }
    },
    "menus": {
      "commandPalette": [
        {
          "command": "sqlRunner.describeTableAtCursor",
          "when": "editorLangId == sql"
        },
        {
          "command": "sqlRunner.refreshMetadata",
          "when": "editorLangId == sql"
        },
        {
          "command": "sqlRunner.showMetadataStats",
          "when": "editorLangId == sql"
        },
        {
          "command": "sqlRunner.editSchemasConfig",
          "when": "editorLangId == sql"
        },
        {
          "command": "sqlRunner.editTablesConfig",
          "when": "editorLangId == sql"
        }
      ]
    }
  },
  "scripts": {
    "vscode:prepublish": "npm run compile",
    "compile": "tsc -p ./",
    "watch": "tsc -watch -p ./",
    "pretest": "npm run compile",
    "lint": "eslint src --ext ts"
  },
  "devDependencies": {
    "@types/node": "^18.x",
    "@types/vscode": "^1.85.0",
    "@typescript-eslint/eslint-plugin": "^6.13.0",
    "@typescript-eslint/parser": "^6.13.0",
    "eslint": "^8.54.0",
    "typescript": "^5.3.0"
  },
  "dependencies": {}
}
